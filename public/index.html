<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dinner for 5</title>

<link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Ccircle cx='32' cy='32' r='32' fill='%231a1a2e'/%3E%3Ccircle cx='32' cy='33' r='19' fill='%23e8c547'/%3E%3Ccircle cx='32' cy='33' r='14' fill='%23d4531a'/%3E%3Ctext x='32' y='41' font-size='16' text-anchor='middle' font-family='sans-serif'%3EüçΩ%3C/text%3E%3C/svg%3E">

<link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;500;600;700&family=Source+Sans+3:wght@300;400;600&display=swap" rel="stylesheet">

<style>
:root {
  --page:    #111318;
  --card:    #1c1f28;
  --card2:   #222630;
  --border:  #2e3340;
  --border2: #3a3f4e;
  --text:    #f0ece4;
  --soft:    #8a8fa0;
  --radius:  12px;
  --shadow:  0 4px 24px rgba(0,0,0,0.5);
  --shadow2: 0 2px 10px rgba(0,0,0,0.4);
}

* { margin:0; padding:0; box-sizing:border-box; }

body {
  background: var(--page);
  font-family: 'Source Sans 3', sans-serif;
  color: var(--text);
  min-height: 100vh;
}

/* ‚îÄ‚îÄ HEADER ‚îÄ‚îÄ */
header {
  position: relative;
  overflow: hidden;
  background: #0d0f14;
  padding: 0;
}

.header-bg {
  position: absolute;
  inset: 0;
  background:
    radial-gradient(ellipse 60% 80% at 15% 50%, rgba(210,70,20,0.55) 0%, transparent 70%),
    radial-gradient(ellipse 50% 70% at 85% 40%, rgba(180,130,10,0.45) 0%, transparent 65%),
    radial-gradient(ellipse 40% 60% at 50% 100%, rgba(100,40,140,0.35) 0%, transparent 60%),
    radial-gradient(ellipse 30% 50% at 70% 10%, rgba(20,120,80,0.3) 0%, transparent 55%),
    linear-gradient(170deg, #0d0f14 0%, #151820 50%, #0a0c10 100%);
  z-index: 0;
}

.food-scatter {
  position: absolute;
  inset: 0;
  z-index: 1;
  pointer-events: none;
  overflow: hidden;
}
.food-scatter span {
  position: absolute;
  font-size: var(--fs, 2.8rem);
  opacity: var(--op, 0.18);
  transform: rotate(var(--rot, 0deg));
  filter: blur(0.3px);
  user-select: none;
}

.header-inner {
  position: relative;
  z-index: 2;
  text-align: center;
  padding: 3.5rem 2rem 3rem;
}

.header-eyebrow {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  background: rgba(255,255,255,0.08);
  border: 1px solid rgba(255,255,255,0.14);
  border-radius: 30px;
  padding: 0.3rem 1rem;
  font-size: 0.72rem;
  font-weight: 600;
  letter-spacing: 2.5px;
  text-transform: uppercase;
  color: #e8c547;
  margin-bottom: 1.1rem;
}

header h1 {
  font-family: 'Oswald', sans-serif;
  font-size: clamp(3.2rem, 9vw, 6.5rem);
  font-weight: 700;
  color: #fff;
  letter-spacing: 2px;
  text-transform: uppercase;
  line-height: 1;
  text-shadow: 0 4px 30px rgba(0,0,0,0.8);
}
header h1 span { color: #e8c547; }

.header-divider {
  width: 60px;
  height: 3px;
  background: linear-gradient(90deg, #d4531a, #e8c547);
  margin: 1.1rem auto;
  border-radius: 2px;
}

header p {
  color: rgba(255,255,255,0.6);
  font-size: 1rem;
  font-weight: 300;
  letter-spacing: 1px;
}

.emoji-strip {
  position: relative;
  z-index: 2;
  display: flex;
  justify-content: center;
  border-top: 1px solid rgba(255,255,255,0.07);
}
.emoji-strip-item {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0.7rem 0;
  font-size: 1.6rem;
  background: rgba(255,255,255,0.03);
  border-right: 1px solid rgba(255,255,255,0.05);
  transition: background 0.2s;
}
.emoji-strip-item:last-child { border-right: none; }
.emoji-strip-item:hover { background: rgba(255,255,255,0.07); }

/* ‚îÄ‚îÄ MAIN ‚îÄ‚îÄ */
main {
  max-width: 880px;
  margin: 0 auto;
  padding: 2.5rem 1.25rem 4rem;
}

/* ‚îÄ‚îÄ LOADING STATE ‚îÄ‚îÄ */
#loading-state {
  text-align: center;
  padding: 3rem 1rem;
  color: var(--soft);
}
.spinner {
  width: 36px; height: 36px;
  border: 3px solid var(--border2);
  border-top-color: #d4531a;
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
  margin: 0 auto 1rem;
}
@keyframes spin { to { transform: rotate(360deg); } }

/* ‚îÄ‚îÄ ADD RECIPE CARD ‚îÄ‚îÄ */
.add-card {
  background: var(--card);
  border: 1px solid var(--border2);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  margin-bottom: 2.5rem;
  overflow: hidden;
}

.add-card-header {
  background: linear-gradient(90deg, #d4531a 0%, #b83a10 100%);
  padding: 0.85rem 1.4rem;
  display: flex;
  align-items: center;
  gap: 0.7rem;
}
.add-card-header h2 {
  font-family: 'Oswald', sans-serif;
  font-size: 1.1rem;
  font-weight: 500;
  letter-spacing: 1.5px;
  text-transform: uppercase;
  color: #fff;
}

.add-form {
  padding: 1.2rem 1.4rem 1.4rem;
  display: flex;
  flex-wrap: wrap;
  gap: 0.8rem;
  align-items: flex-end;
}

.field-group {
  display: flex;
  flex-direction: column;
  gap: 0.3rem;
  flex: 1;
  min-width: 140px;
}
.field-group label {
  font-size: 0.68rem;
  font-weight: 600;
  letter-spacing: 1.2px;
  text-transform: uppercase;
  color: var(--soft);
}
.field-group input,
.field-group select,
.field-group textarea {
  font-family: 'Source Sans 3', sans-serif;
  font-size: 0.9rem;
  color: var(--text);
  background: #13151c;
  border: 1px solid var(--border2);
  border-radius: 7px;
  padding: 0.55rem 0.8rem;
  transition: border-color 0.18s, box-shadow 0.18s;
}
.field-group input::placeholder,
.field-group textarea::placeholder { color: #444a58; }
.field-group select option { background: #1c1f28; }
.field-group input:focus,
.field-group select:focus,
.field-group textarea:focus {
  outline: none;
  border-color: #d4531a;
  box-shadow: 0 0 0 3px rgba(212,83,26,0.18);
}
.field-group textarea {
  resize: vertical;
  min-height: 72px;
  line-height: 1.55;
}

.btn-add {
  background: linear-gradient(135deg, #d4531a 0%, #b83a10 100%);
  color: #fff;
  border: none;
  border-radius: 8px;
  padding: 0.65rem 1.4rem;
  font-family: 'Oswald', sans-serif;
  font-size: 1rem;
  font-weight: 500;
  letter-spacing: 1px;
  text-transform: uppercase;
  cursor: pointer;
  white-space: nowrap;
  align-self: flex-end;
  box-shadow: 0 3px 14px rgba(212,83,26,0.4);
  transition: opacity 0.18s, transform 0.12s;
  position: relative;
}
.btn-add:hover { opacity: 0.9; transform: translateY(-1px); }
.btn-add:active { transform: translateY(0); }
.btn-add:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }

/* ‚îÄ‚îÄ CATEGORY SECTIONS ‚îÄ‚îÄ */
.category {
  border-radius: var(--radius);
  margin-bottom: 0.9rem;
  overflow: hidden;
  box-shadow: var(--shadow2);
}
.cat-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 1.4rem;
  height: 62px;
  cursor: pointer;
  user-select: none;
  transition: filter 0.15s;
}
.cat-header:hover { filter: brightness(1.08); }
.cat-title {
  font-family: 'Oswald', sans-serif;
  font-size: 1.25rem;
  font-weight: 600;
  letter-spacing: 1.5px;
  text-transform: uppercase;
  display: flex;
  align-items: center;
  gap: 0.7rem;
  color: #fff;
}
.cat-icon { font-size: 1.5rem; }
.cat-count {
  font-family: 'Source Sans 3', sans-serif;
  font-size: 0.72rem;
  font-weight: 600;
  letter-spacing: 0.5px;
  padding: 0.18rem 0.6rem;
  border-radius: 20px;
  background: rgba(0,0,0,0.25);
  color: rgba(255,255,255,0.85);
}
.cat-chevron {
  font-size: 0.8rem;
  color: rgba(255,255,255,0.6);
  transition: transform 0.28s ease;
}
.category.open .cat-chevron { transform: rotate(180deg); }

.cat-quick     .cat-header { background: linear-gradient(90deg, #d4531a 0%, #c04010 100%); }
.cat-mexican   .cat-header { background: linear-gradient(90deg, #1a9e50 0%, #137a3c 100%); }
.cat-casserole .cat-header { background: linear-gradient(90deg, #1565c0 0%, #0d47a1 100%); }
.cat-pasta     .cat-header { background: linear-gradient(90deg, #c0392b 0%, #962d22 100%); }
.cat-grilling  .cat-header { background: linear-gradient(90deg, #e65100 0%, #bf360c 100%); }
.cat-griddle   .cat-header { background: linear-gradient(90deg, #5c3d8f 0%, #3d2260 100%); }
.cat-soups     .cat-header { background: linear-gradient(90deg, #00838f 0%, #006064 100%); }
.cat-breakfast .cat-header { background: linear-gradient(90deg, #b8860b 0%, #8c6400 100%); }
.cat-custom    .cat-header { background: linear-gradient(90deg, #6a1f6a 0%, #4a1450 100%); }

.cat-body {
  display: none;
  background: var(--card);
  border: 1px solid var(--border);
  border-top: none;
  border-radius: 0 0 var(--radius) var(--radius);
  padding: 0.5rem;
}
.category.open .cat-body { display: block; }
.empty-cat {
  text-align: center;
  padding: 1.5rem;
  color: var(--soft);
  font-size: 0.88rem;
  font-style: italic;
}

/* ‚îÄ‚îÄ RECIPE ITEMS ‚îÄ‚îÄ */
.recipe-item {
  border-radius: 8px;
  margin-bottom: 0.35rem;
  overflow: hidden;
  border: 1px solid transparent;
  transition: border-color 0.18s;
}
.recipe-item:last-child { margin-bottom: 0; }
.recipe-item.open { border-color: var(--border2); }

.recipe-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0.75rem 0.9rem;
  cursor: pointer;
  background: var(--card2);
  border-radius: 7px;
  transition: background 0.15s;
}
.recipe-item.open .recipe-header { border-radius: 7px 7px 0 0; background: #282c38; }
.recipe-header:hover { background: #282c38; }

.recipe-name {
  font-family: 'Oswald', sans-serif;
  font-size: 1.05rem;
  font-weight: 400;
  letter-spacing: 0.5px;
  color: var(--text);
}
.recipe-meta {
  font-size: 0.75rem;
  color: var(--soft);
  margin-top: 0.15rem;
  display: flex;
  align-items: center;
  gap: 0.45rem;
}
.badge-time {
  background: rgba(212,83,26,0.2);
  color: #f08050;
  padding: 0.1rem 0.45rem;
  border-radius: 20px;
  font-size: 0.7rem;
  font-weight: 600;
}
.badge-serves {
  background: rgba(26,158,80,0.2);
  color: #60c888;
  padding: 0.1rem 0.45rem;
  border-radius: 20px;
  font-size: 0.7rem;
  font-weight: 600;
}

.recipe-actions { display: flex; align-items: center; gap: 0.4rem; flex-shrink: 0; }
.recipe-chevron {
  font-size: 0.72rem;
  color: var(--soft);
  transition: transform 0.22s;
}
.recipe-item.open .recipe-chevron { transform: rotate(180deg); }

.recipe-footer {
  margin-top: 1.2rem;
  padding-top: 1rem;
  border-top: 1px solid var(--border);
  display: flex;
  justify-content: flex-end;
}

.btn-delete {
  background: none;
  border: 1px solid rgba(200,50,50,0.35);
  cursor: pointer;
  font-size: 0.82rem;
  font-family: 'Source Sans 3', sans-serif;
  font-weight: 600;
  color: rgba(220,80,80,0.7);
  padding: 0.4rem 0.9rem;
  border-radius: 6px;
  transition: all 0.18s;
  line-height: 1;
}
.btn-delete:hover { background: rgba(200,50,50,0.15); border-color: rgba(200,50,50,0.7); color: #e05050; }

.recipe-body {
  display: none;
  padding: 1.1rem 0.9rem;
  background: #181b23;
  border-radius: 0 0 7px 7px;
  border-top: 1px solid var(--border);
}
.recipe-item.open .recipe-body { display: block; }

.section-label {
  font-family: 'Oswald', sans-serif;
  font-size: 0.75rem;
  font-weight: 500;
  letter-spacing: 2px;
  text-transform: uppercase;
  color: var(--soft);
  margin-bottom: 0.6rem;
  margin-top: 1rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}
.section-label:first-child { margin-top: 0; }
.section-label::after { content: ''; flex: 1; height: 1px; background: var(--border); }

.ingredients-grid {
  list-style: none;
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(178px, 1fr));
  gap: 0.3rem;
}
.ingredients-grid li {
  font-size: 0.86rem;
  color: #ccc8c0;
  background: var(--card2);
  border: 1px solid var(--border);
  border-radius: 6px;
  padding: 0.32rem 0.65rem;
  display: flex;
  align-items: center;
  gap: 0.4rem;
}
.ingredients-grid li::before {
  content: '';
  width: 6px; height: 6px;
  background: #d4531a;
  border-radius: 50%;
  flex-shrink: 0;
}

.steps-list { counter-reset: step; list-style: none; }
.steps-list li {
  counter-increment: step;
  display: flex;
  gap: 0.8rem;
  font-size: 0.9rem;
  line-height: 1.6;
  margin-bottom: 0.6rem;
  color: #c8c4bc;
}
.steps-list li::before {
  content: counter(step);
  background: #d4531a;
  color: #fff;
  border-radius: 50%;
  min-width: 22px; height: 22px;
  display: flex; align-items: center; justify-content: center;
  font-size: 0.68rem;
  font-weight: 700;
  font-family: 'Oswald', sans-serif;
  flex-shrink: 0;
  margin-top: 3px;
}

/* ‚îÄ‚îÄ TOAST ‚îÄ‚îÄ */
.toast {
  position: fixed;
  bottom: 2rem; right: 2rem;
  background: #d4531a;
  color: #fff;
  padding: 0.75rem 1.3rem;
  border-radius: 8px;
  font-size: 0.88rem;
  font-weight: 600;
  font-family: 'Oswald', sans-serif;
  letter-spacing: 0.5px;
  opacity: 0;
  transform: translateY(16px);
  transition: all 0.28s ease;
  pointer-events: none;
  z-index: 9999;
  box-shadow: 0 6px 24px rgba(212,83,26,0.5);
}
.toast.show { opacity: 1; transform: translateY(0); }

@media (max-width: 620px) {
  .add-form { flex-direction: column; }
  .ingredients-grid { grid-template-columns: 1fr 1fr; }
  .emoji-strip-item { font-size: 1.2rem; }
}
@media (max-width: 400px) {
  .ingredients-grid { grid-template-columns: 1fr; }
}
</style>
</head>
<body>

<header>
  <div class="header-bg"></div>
  <div class="food-scatter">
    <span style="--fs:5rem;--op:0.13;--rot:-15deg; top:8%;  left:3%">üçï</span>
    <span style="--fs:4rem;--op:0.15;--rot:12deg;  top:5%;  left:14%">üåÆ</span>
    <span style="--fs:6rem;--op:0.10;--rot:-8deg;  top:40%; left:2%">ü•©</span>
    <span style="--fs:3.5rem;--op:0.16;--rot:20deg; top:70%; left:8%">üßÑ</span>
    <span style="--fs:4.5rem;--op:0.12;--rot:-5deg; top:15%; left:24%">üçù</span>
    <span style="--fs:3rem;--op:0.18;--rot:30deg;  top:60%; left:20%">üå∂Ô∏è</span>
    <span style="--fs:5.5rem;--op:0.09;--rot:5deg;  top:30%; left:72%">üçî</span>
    <span style="--fs:4rem;--op:0.14;--rot:-20deg; top:10%; left:80%">ü•ò</span>
    <span style="--fs:5rem;--op:0.11;--rot:10deg;  top:55%; left:78%">üåΩ</span>
    <span style="--fs:3.5rem;--op:0.17;--rot:-12deg;top:75%; left:88%">üßÖ</span>
    <span style="--fs:4rem;--op:0.13;--rot:18deg;  top:5%;  left:90%">üç≥</span>
    <span style="--fs:3rem;--op:0.15;--rot:-25deg; top:80%; left:60%">ü•ë</span>
    <span style="--fs:4.5rem;--op:0.10;--rot:8deg;  top:45%; left:88%">üåø</span>
    <span style="--fs:3rem;--op:0.14;--rot:-18deg; top:20%; left:60%">üßÄ</span>
    <span style="--fs:5rem;--op:0.08;--rot:22deg;  top:65%; left:44%">üçÖ</span>
    <span style="--fs:3.5rem;--op:0.16;--rot:-10deg;top:5%;  left:50%">ü´ï</span>
    <span style="--fs:3rem;--op:0.13;--rot:15deg;  top:80%; left:32%">ü•ì</span>
    <span style="--fs:4rem;--op:0.11;--rot:-22deg; top:38%; left:38%">üçã</span>
  </div>
  <div class="header-inner">
    <div class="header-eyebrow">üç¥ Family Kitchen</div>
    <h1>Dinner <span>for 5</span></h1>
    <div class="header-divider"></div>
    <p>Every recipe your family loves, all in one place</p>
  </div>
  <div class="emoji-strip">
    <div class="emoji-strip-item">ü•©</div>
    <div class="emoji-strip-item">üåÆ</div>
    <div class="emoji-strip-item">üçù</div>
    <div class="emoji-strip-item">ü•ò</div>
    <div class="emoji-strip-item">üçî</div>
    <div class="emoji-strip-item">üçï</div>
    <div class="emoji-strip-item">üå∂Ô∏è</div>
    <div class="emoji-strip-item">üßÑ</div>
    <div class="emoji-strip-item">ü•ë</div>
    <div class="emoji-strip-item">üç≥</div>
  </div>
</header>

<main>
  <div id="loading-state">
    <div class="spinner"></div>
    <p>Loading recipes...</p>
  </div>

  <div id="categories" style="display:none"></div>

  <div class="add-card" style="margin-top:2rem;margin-bottom:0">
    <div class="add-card-header">
      <span style="font-size:1.2rem">‚úèÔ∏è</span>
      <h2>Add a New Recipe</h2>
    </div>
    <div class="add-form">
      <div class="field-group" style="flex:1.5;min-width:160px">
        <label>Recipe Name</label>
        <input type="text" id="new-name" placeholder="e.g. Sheet Pan Chicken">
      </div>
      <div class="field-group" style="flex:0;min-width:175px">
        <label>Category</label>
        <select id="new-cat">
          <option value="quick">‚ö° Super Quick</option>
          <option value="mexican">üåÆ Mexican</option>
          <option value="casserole">ü•ò Casseroles</option>
          <option value="pasta">üçù Pasta</option>
          <option value="grilling">üî• Grilling</option>
          <option value="griddle">ü•© Blackstone Griddle</option>
          <option value="soups">üç≤ Soups & Stews</option>
          <option value="breakfast">ü•û Breakfast for Dinner</option>
          <option value="custom">‚≠ê Family Favorites</option>
        </select>
      </div>
      <div class="field-group" style="flex:0;min-width:120px">
        <label>Cook Time</label>
        <input type="text" id="new-time" placeholder="e.g. 30 min">
      </div>
      <div class="field-group" style="flex:2;min-width:190px">
        <label>Ingredients (one per line)</label>
        <textarea id="new-ingredients" placeholder="2 lbs chicken thighs&#10;1 can black beans&#10;3 tbsp olive oil"></textarea>
      </div>
      <div class="field-group" style="flex:2;min-width:190px">
        <label>Instructions (one per line)</label>
        <textarea id="new-instructions" placeholder="Preheat oven to 400¬∞F&#10;Season and toss chicken...&#10;Roast 25 min"></textarea>
      </div>
      <button class="btn-add" id="btn-add" onclick="addRecipe()">+ Add</button>
    </div>
  </div>
</main>

<div class="toast" id="toast"></div>

<script>
const CATEGORIES = [
  { id:'quick',     label:'Super Quick',         icon:'‚ö°', cls:'cat-quick'     },
  { id:'mexican',   label:'Mexican Night',        icon:'üåÆ', cls:'cat-mexican'   },
  { id:'casserole', label:'Casseroles',            icon:'ü•ò', cls:'cat-casserole' },
  { id:'pasta',     label:'Pasta',                icon:'üçù', cls:'cat-pasta'     },
  { id:'grilling',  label:'Grilling',             icon:'üî•', cls:'cat-grilling'  },
  { id:'griddle',   label:'Blackstone Griddle',   icon:'ü•©', cls:'cat-griddle'   },
  { id:'soups',     label:'Soups & Stews',        icon:'üç≤', cls:'cat-soups'     },
  { id:'breakfast', label:'Breakfast for Dinner', icon:'ü•û', cls:'cat-breakfast' },
  { id:'custom',    label:'Family Favorites',      icon:'‚≠ê', cls:'cat-custom'    },
];

function uid(){ return Date.now().toString(36) + Math.random().toString(36).substr(2,5); }

// ‚îÄ‚îÄ Default recipes seeded on first load ‚îÄ‚îÄ
const DEFAULT_RECIPES = [
  {id:uid(),cat:'quick',name:'Sheet Pan Chicken & Veggies',time:'30 min',
   ingredients:['2.5 lbs chicken thighs','2 bell peppers, sliced','1 zucchini, sliced','1 red onion, sliced','3 tbsp olive oil','2 tsp garlic powder','1 tsp paprika','1 tsp Italian seasoning','Salt & pepper'],
   instructions:['Preheat oven to 425¬∞F.','Toss all veggies and chicken with olive oil and seasonings on a large sheet pan.','Spread in a single layer.','Roast 25‚Äì30 min until chicken reaches 165¬∞F, flipping veggies halfway.','Serve with rice or crusty bread.']},
  {id:uid(),cat:'quick',name:'Beef & Broccoli Stir-Fry',time:'25 min',
   ingredients:['1.5 lbs flank steak, sliced thin','4 cups broccoli florets','3 cloves garlic, minced','3 tbsp soy sauce','2 tbsp oyster sauce','1 tbsp sesame oil','1 tbsp cornstarch','2 tbsp vegetable oil','Cooked rice for serving'],
   instructions:['Toss steak with cornstarch.','Heat oil in wok over high heat; sear beef 2 min per side, remove.','Add broccoli and garlic; stir-fry 3 min.','Return beef; add soy sauce, oyster sauce, sesame oil.','Toss to coat and serve over rice.']},
  {id:uid(),cat:'quick',name:'Honey Garlic Salmon',time:'20 min',
   ingredients:['5 salmon fillets (6 oz each)','3 tbsp honey','3 tbsp soy sauce','4 cloves garlic, minced','1 tbsp olive oil','Lemon wedges','Fresh parsley'],
   instructions:['Mix honey, soy sauce, and garlic for glaze.','Season salmon with salt and pepper.','Heat oil in oven-safe skillet; sear salmon 3 min per side.','Pour glaze over; transfer to 400¬∞F oven for 6 min.','Garnish with parsley and lemon.']},
  {id:uid(),cat:'mexican',name:'Family Taco Night',time:'35 min',
   ingredients:['2 lbs ground beef or turkey','2 packets taco seasoning','¬Ω cup water','10 taco shells + flour tortillas','2 cups shredded cheese','2 cups shredded lettuce','2 tomatoes, diced','1 can black beans','Sour cream, salsa, guacamole'],
   instructions:['Brown meat in large skillet; drain fat.','Add taco seasoning and water; simmer 5 min.','Warm black beans in small pot.','Set up a taco bar with all toppings.','Let everyone build their own tacos!']},
  {id:uid(),cat:'mexican',name:'Green Chile Enchiladas',time:'50 min',
   ingredients:['2 lbs chicken breast, cooked & shredded','2 cans green enchilada sauce','12 corn tortillas','3 cups shredded Monterey Jack','1 can green chiles','1 cup sour cream','1 tsp cumin'],
   instructions:['Preheat oven to 375¬∞F. Mix chicken with green chiles, cumin, 1 cup cheese, and half the sour cream.','Warm tortillas to soften.','Fill each tortilla; roll seam-down into baking dish.','Pour enchilada sauce over; sprinkle remaining cheese.','Bake 25‚Äì30 min until bubbly. Top with remaining sour cream.']},
  {id:uid(),cat:'mexican',name:'Chicken Burrito Bowls',time:'40 min',
   ingredients:['2 lbs chicken breast','2 cups white rice','2 cans black beans','2 cups corn (frozen or canned)','1 jar salsa','2 tbsp olive oil','1 lime, juiced','2 tsp cumin','2 tsp chili powder','Cheese, sour cream, avocado, cilantro'],
   instructions:['Season chicken with cumin, chili powder, salt, oil, and lime juice.','Grill or bake chicken at 400¬∞F for 20‚Äì25 min; slice.','Cook rice per package directions.','Warm beans and corn.','Assemble bowls: rice, beans, corn, chicken, then toppings.']},
  {id:uid(),cat:'casserole',name:'Classic Tater Tot Casserole',time:'55 min',
   ingredients:['2 lbs ground beef','1 can cream of mushroom soup','1 can cream of chicken soup','1 cup sour cream','2 cups shredded cheddar','1 bag (32 oz) frozen tater tots','1 onion, diced','Salt, pepper, garlic powder'],
   instructions:['Preheat oven to 375¬∞F.','Brown beef with onion; drain fat. Season.','Mix in soups, sour cream, and 1 cup cheese.','Spread into greased 9√ó13 dish.','Top with tater tots, then remaining cheese.','Bake 40‚Äì45 min until golden and crispy.']},
  {id:uid(),cat:'casserole',name:'Chicken & Rice Casserole',time:'1 hr 10 min',
   ingredients:['2 lbs chicken thighs (bone-in)','2 cups long-grain white rice (uncooked)','2 cans cream of chicken soup','2 cups chicken broth','1 cup milk','1 packet onion soup mix','2 cups frozen peas','1 tsp garlic powder'],
   instructions:['Preheat oven to 350¬∞F. Grease deep 9√ó13 baking dish.','Mix soups, broth, milk, garlic powder, rice, and peas.','Pour into dish. Place chicken on top; sprinkle with onion soup mix.','Cover tightly with foil.','Bake 1 hour. Uncover; bake 10 min more.','Let rest 5 min before serving.']},
  {id:uid(),cat:'casserole',name:'Cheesy Baked Ziti',time:'55 min',
   ingredients:['1 lb ziti pasta','2 lbs Italian sausage','1 jar (24 oz) marinara sauce','15 oz ricotta cheese','3 cups shredded mozzarella','¬Ω cup Parmesan, grated','2 eggs','1 tsp Italian seasoning'],
   instructions:['Preheat oven to 375¬∞F. Cook pasta al dente; drain.','Brown sausage; drain fat. Mix with marinara.','Combine ricotta, eggs, seasoning, and 1 cup mozzarella.','Layer pasta, meat sauce, ricotta mixture, remaining pasta, sauce, then cheeses.','Cover with foil; bake 30 min. Uncover; bake 15 min until bubbly and golden.']},
  {id:uid(),cat:'pasta',name:'One-Pot Spaghetti Bolognese',time:'45 min',
   ingredients:['1.5 lbs ground beef','1 lb spaghetti','1 onion, diced','4 cloves garlic, minced','2 cans (14 oz each) crushed tomatoes','2 tbsp tomato paste','1 tsp each: oregano, basil, sugar','2 cups beef broth','Parmesan for serving'],
   instructions:['Brown beef with onion; add garlic; cook 1 min.','Add tomato paste; cook 2 min.','Add tomatoes, broth, and seasonings; bring to boil.','Break spaghetti in half; nestle into sauce.','Cover; simmer 12‚Äì15 min, stirring occasionally.','Serve topped with Parmesan.']},
  {id:uid(),cat:'pasta',name:'Creamy Chicken Alfredo',time:'35 min',
   ingredients:['1.5 lbs chicken breast, sliced','1 lb fettuccine','2 cups heavy cream','1 cup Parmesan, grated','4 cloves garlic, minced','4 tbsp butter','1 tsp Italian seasoning','Salt, pepper, parsley'],
   instructions:['Cook fettuccine; reserve ¬Ω cup pasta water.','Season and cook chicken in butter; remove.','Saut√© garlic 1 min. Add cream; simmer 3 min.','Stir in Parmesan until melted. Thin with pasta water if needed.','Toss in pasta and chicken. Garnish with parsley.']},
  {id:uid(),cat:'grilling',name:'Classic Backyard Burgers',time:'25 min',
   ingredients:['2.5 lbs 80/20 ground beef','5 burger buns','Salt & pepper','5 slices cheddar cheese','Lettuce, tomato, onion','Ketchup, mustard, mayo','1 tbsp Worcestershire sauce'],
   instructions:['Mix beef with Worcestershire, salt, pepper. Form 5 patties 1 inch thick.','Make a small indent in each center to prevent puffing.','Grill on high 4 min per side for medium.','Add cheese in last minute; tent to melt.','Toast buns on grill. Serve with toppings.']},
  {id:uid(),cat:'grilling',name:'BBQ Chicken Thighs',time:'45 min',
   ingredients:['10 bone-in chicken thighs','1.5 cups BBQ sauce','2 tbsp olive oil','1 tsp garlic powder','1 tsp smoked paprika','1 tsp onion powder','Salt & pepper'],
   instructions:['Mix olive oil and spices; rub over chicken.','Grill on medium heat, bone-side up, 20 min.','Flip; brush with BBQ sauce. Grill 15 more min, basting every 5 min.','Chicken is done at 165¬∞F internal temp.','Let rest 5 min before serving.']},
  {id:uid(),cat:'griddle',name:'Blackstone Hibachi Chicken & Fried Rice',time:'40 min',
   ingredients:['2 lbs chicken breast, cubed','4 cups cooked white rice (day-old is best)','4 eggs','1 cup frozen peas & carrots','1 onion, diced','4 cloves garlic, minced','1 tbsp fresh ginger, grated','4 tbsp soy sauce','2 tbsp sesame oil','2 tbsp butter','2 tbsp vegetable oil','2 tbsp hibachi or teriyaki sauce','Salt & pepper','Yum Yum sauce for serving','Green onions for garnish'],
   instructions:['Preheat Blackstone to high on one side, medium-low on the other.','Oil the hot side; add chicken. Cook 6‚Äì8 min until golden. Add garlic, ginger, and hibachi sauce; toss. Move to cool side.','Add butter to hot zone. Add onion and peas & carrots; stir-fry 3 min.','Push veggies aside. Crack eggs in center; scramble until just set; fold into veggies.','Add rice to hot zone; press flat and crisp 2 min. Drizzle with soy sauce and sesame oil; toss everything together.','Combine rice with chicken. Garnish with green onions. Serve with yum yum sauce.']},
  {id:uid(),cat:'griddle',name:'Blackstone Smash Burgers',time:'20 min',
   ingredients:['2.5 lbs 80/20 ground beef','10 slices American cheese','5 brioche burger buns','1 onion, finely minced','Salt & pepper','Smash sauce: ¬Ω cup mayo, 2 tbsp ketchup, 1 tbsp mustard, 1 tbsp sweet relish, pinch garlic powder','Shredded lettuce, pickles, tomato'],
   instructions:['Mix smash sauce; refrigerate until serving.','Preheat Blackstone to high. Lightly oil surface.','Form beef into 10 loose 4-oz balls (two per burger).','Place balls on griddle; immediately smash flat with a heavy spatula. Season with salt and pepper.','Cook 2‚Äì3 min until edges are crispy and deeply browned. Flip; add cheese. Cook 1 more min.','Stack two cheesy patties per toasted bun. Load with smash sauce, lettuce, pickles, and tomato.']},
  {id:uid(),cat:'griddle',name:'Blackstone Philly Cheesesteaks',time:'30 min',
   ingredients:['2 lbs ribeye steak, thinly sliced (freeze 30 min first)','2 green bell peppers, sliced','2 onions, sliced','2 cups mushrooms, sliced','10 slices provolone cheese','5 hoagie rolls','3 tbsp butter','2 tbsp Worcestershire sauce','Garlic powder, salt, pepper'],
   instructions:['Preheat Blackstone to medium-high.','Melt butter; add onions, peppers, and mushrooms. Cook 8‚Äì10 min until soft and caramelized.','Push veggies to one side. Add steak to empty zone; season and chop as it cooks, about 4 min.','Combine steak with veggies. Lay provolone over the top; let melt 1 min.','Scoop into hoagie rolls and serve immediately.']},
  {id:uid(),cat:'griddle',name:'Griddle Fajita Night',time:'25 min',
   ingredients:['2 lbs chicken breast or skirt steak, sliced','3 bell peppers (mixed colors), sliced','2 onions, sliced','3 tbsp olive oil','Fajita seasoning: 2 tsp cumin, 2 tsp chili powder, 1 tsp smoked paprika, 1 tsp garlic powder, salt','10 flour tortillas','Sour cream, guacamole, salsa, shredded cheese, lime wedges'],
   instructions:['Toss protein and veggies with olive oil and fajita seasoning (separately).','Preheat Blackstone to high. Cook protein 5‚Äì7 min, stirring, until cooked through.','Move protein to cooler side. Cook peppers and onions 5 min until charred at edges.','Combine protein and veggies; squeeze lime juice over everything.','Warm tortillas on the griddle 30 seconds per side.','Serve fajita-bar style with all toppings!']},
  {id:uid(),cat:'griddle',name:'Blackstone Breakfast Scramble',time:'25 min',
   ingredients:['10 eggs','1 lb breakfast sausage','1 bag (20 oz) frozen diced hash browns','1 bell pepper, diced','1 onion, diced','2 cups shredded cheddar','3 tbsp butter','Salt, pepper, garlic powder','Hot sauce for serving'],
   instructions:['Preheat Blackstone to medium. Add hash browns with butter; press flat. Cook 8 min without moving until crispy.','On adjacent zone, cook sausage breaking into crumbles. Add pepper and onion; cook 4 min.','Flip hash browns; season with salt, pepper, and garlic powder.','Beat eggs, season, and pour onto griddle next to sausage. Stir gently as they scramble.','Combine everything; top with cheese. Cover briefly to melt.','Serve straight off the griddle with hot sauce.']},
  {id:uid(),cat:'soups',name:'Slow Cooker Chicken Tortilla Soup',time:'6‚Äì8 hrs',
   ingredients:['2 lbs chicken breast','2 cans black beans, drained','1 can corn, drained','1 can Rotel tomatoes','1 can diced tomatoes','32 oz chicken broth','1 packet taco seasoning','1 tsp cumin','Toppings: tortilla strips, cheese, avocado, sour cream, lime'],
   instructions:['Add all ingredients (except toppings) to slow cooker.','Cook on low 6‚Äì8 hrs or high 3‚Äì4 hrs.','Shred chicken with two forks right in the pot.','Stir to combine.','Ladle into bowls and pile on all the toppings.']},
  {id:uid(),cat:'soups',name:'Hearty Beef Vegetable Soup',time:'1 hr 15 min',
   ingredients:['1.5 lbs beef stew meat, cubed','4 carrots, sliced','4 potatoes, cubed','3 stalks celery, sliced','1 onion, diced','2 cans diced tomatoes','32 oz beef broth','2 cups frozen green beans','2 tsp Worcestershire','1 tsp thyme, salt, pepper'],
   instructions:['Brown beef in large pot over high heat; remove.','Saut√© onion and celery 3 min. Return beef.','Add broth, tomatoes, carrots, potatoes, Worcestershire, and thyme.','Bring to boil; reduce heat. Simmer 45 min until beef is tender.','Add green beans; cook 10 more min. Season to taste.']},
  {id:uid(),cat:'breakfast',name:'Fluffy Pancakes & Scrambled Eggs',time:'30 min',
   ingredients:['3 cups pancake mix','2 cups milk','2 eggs','3 tbsp melted butter','10 eggs (for scrambling)','¬Ω cup milk','3 tbsp butter','Maple syrup, fresh berries','Powdered sugar'],
   instructions:['Mix pancake mix, milk, 2 eggs, and butter until just combined (lumps OK).','Cook pancakes on medium griddle, flipping when bubbles form.','Whisk 10 eggs with milk, salt, and pepper.','Scramble in buttered pan over medium-low heat, stirring gently.','Serve pancakes and eggs together with syrup and berries.']},
  {id:uid(),cat:'breakfast',name:'Loaded Breakfast Burritos',time:'35 min',
   ingredients:['10 large eggs','1 lb breakfast sausage','1 bell pepper, diced','1 onion, diced','2 cups shredded cheddar','5 large flour tortillas','1 can diced green chiles','Salsa and hot sauce'],
   instructions:['Cook sausage; drain fat. Add bell pepper and onion; cook 4 min.','Whisk eggs with salt and pepper; scramble into pan with sausage mixture.','Remove from heat; fold in green chiles.','Warm tortillas in microwave.','Fill each tortilla with egg mixture and cheese; roll tightly.','Serve with salsa.']},
  {id:uid(),cat:'custom',name:'Homemade Mac & Cheese',time:'40 min',
   ingredients:['1 lb elbow macaroni','4 tbsp butter','¬º cup flour','3 cups whole milk','1 cup heavy cream','3 cups shredded sharp cheddar','1 cup Gruy√®re, shredded','1 tsp mustard powder','¬Ω tsp cayenne','Breadcrumbs for topping'],
   instructions:['Cook pasta; drain.','Melt butter in large pot; whisk in flour; cook 2 min.','Slowly whisk in milk and cream; bring to simmer until thickened, about 5 min.','Remove from heat; stir in cheeses, mustard powder, and cayenne.','Fold in pasta. Transfer to baking dish; top with breadcrumbs.','Bake at 375¬∞F for 20 min until golden.']},
  {id:uid(),cat:'custom',name:'Pizza Night (Homemade Dough)',time:'1 hr + rest',
   ingredients:['3 cups bread flour','1 packet instant yeast','1 tsp salt','1 tsp sugar','1 cup warm water','2 tbsp olive oil','Pizza sauce, shredded mozzarella','Toppings of choice'],
   instructions:['Mix flour, yeast, salt, and sugar. Add water and oil; knead 8 min until smooth.','Cover and let rise 30‚Äì60 min.','Divide dough into portions; stretch onto oiled pans.','Add sauce, cheese, and toppings.','Bake at 500¬∞F (or as high as oven goes) for 10‚Äì12 min.','Let each kid customize their own section!']},
];

// ‚îÄ‚îÄ API helpers ‚îÄ‚îÄ
let recipes = [];

async function loadRecipes() {
  try {
    // Fetch existing recipes first
    const res = await fetch('/api/recipes');
    recipes = await res.json();

    // Only seed defaults if the server has no recipes at all
    if (recipes.length === 0) {
      await fetch('/api/seed', {
        method: 'POST',
        headers: {'Content-Type':'application/json'},
        body: JSON.stringify(DEFAULT_RECIPES)
      });
      const seededRes = await fetch('/api/recipes');
      recipes = await seededRes.json();
    }

    document.getElementById('loading-state').style.display = 'none';
    document.getElementById('categories').style.display = 'block';
    render();
  } catch(e) {
    document.getElementById('loading-state').innerHTML =
      '<p style="color:#f08050">‚ö†Ô∏è Could not connect to server. Please refresh.</p>';
  }
}

async function addRecipe() {
  const name     = document.getElementById('new-name').value.trim();
  const cat      = document.getElementById('new-cat').value;
  const time     = document.getElementById('new-time').value.trim();
  const ingRaw   = document.getElementById('new-ingredients').value.trim();
  const instrRaw = document.getElementById('new-instructions').value.trim();
  if(!name)     { toast('Please enter a recipe name.'); return; }
  if(!ingRaw)   { toast('Please enter at least one ingredient.'); return; }
  if(!instrRaw) { toast('Please enter at least one instruction.'); return; }

  const btn = document.getElementById('btn-add');
  btn.disabled = true;
  btn.textContent = '...';

  try {
    const res = await fetch('/api/recipes', {
      method: 'POST',
      headers: {'Content-Type':'application/json'},
      body: JSON.stringify({
        cat, name, time,
        ingredients:  ingRaw.split('\n').map(s=>s.trim()).filter(Boolean),
        instructions: instrRaw.split('\n').map(s=>s.trim()).filter(Boolean),
      })
    });
    const recipe = await res.json();
    recipes.push(recipe);
    render();

    const catEl = document.getElementById(`cat-${cat}`);
    if(!catEl.classList.contains('open')) catEl.classList.add('open');
    setTimeout(()=>{
      const el = document.getElementById(`recipe-${recipe.id}`);
      if(el){ el.classList.add('open'); el.scrollIntoView({behavior:'smooth',block:'center'}); }
    }, 100);

    document.getElementById('new-name').value = '';
    document.getElementById('new-time').value = '';
    document.getElementById('new-ingredients').value = '';
    document.getElementById('new-instructions').value = '';
    toast('üçΩÔ∏è Recipe added!');
  } catch(e) {
    toast('Error saving recipe. Try again.');
  } finally {
    btn.disabled = false;
    btn.textContent = '+ Add';
  }
}

async function deleteRecipe(e, id) {
  e.stopPropagation();
  if(!confirm('Remove this recipe?')) return;
  try {
    await fetch(`/api/recipes/${id}`, { method: 'DELETE' });
    recipes = recipes.filter(r => r.id !== id);
    render();
    toast('Recipe removed.');
  } catch(e) {
    toast('Error removing recipe. Try again.');
  }
}

// ‚îÄ‚îÄ Render ‚îÄ‚îÄ
function render() {
  const container = document.getElementById('categories');
  // Remember open states
  const openCats = new Set([...document.querySelectorAll('.category.open')].map(el => el.id));
  const openRecipes = new Set([...document.querySelectorAll('.recipe-item.open')].map(el => el.id));

  container.innerHTML = '';
  CATEGORIES.forEach(cat => {
    const catRecipes = recipes.filter(r => r.cat === cat.id);
    const div = document.createElement('div');
    div.className = `category ${cat.cls}${openCats.has('cat-'+cat.id) ? ' open' : ''}`;
    div.id = `cat-${cat.id}`;
    div.innerHTML = `
      <div class="cat-header" onclick="toggleCat('${cat.id}')">
        <span class="cat-title">
          <span class="cat-icon">${cat.icon}</span>
          ${cat.label}
          <span class="cat-count">${catRecipes.length} recipe${catRecipes.length!==1?'s':''}</span>
        </span>
        <span class="cat-chevron">‚ñº</span>
      </div>
      <div class="cat-body">
        ${catRecipes.length===0
          ? '<p class="empty-cat">No recipes yet ‚Äî add one above!</p>'
          : catRecipes.map(r => recipeHTML(r, openRecipes.has('recipe-'+r.id))).join('')}
      </div>`;
    container.appendChild(div);
  });
}

function recipeHTML(r, isOpen) {
  const ingList  = r.ingredients.map(i=>`<li>${i}</li>`).join('');
  const stepList = r.instructions.map(s=>`<li>${s}</li>`).join('');
  return `
    <div class="recipe-item${isOpen?' open':''}" id="recipe-${r.id}">
      <div class="recipe-header" onclick="toggleRecipe('${r.id}')">
        <div>
          <div class="recipe-name">${r.name}</div>
          <div class="recipe-meta">
            ${r.time ? `<span class="badge-time">‚è± ${r.time}</span>` : ''}
            <span class="badge-serves">üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Serves 5</span>
          </div>
        </div>
        <div class="recipe-actions">
          <span class="recipe-chevron">‚ñº</span>
        </div>
      </div>
      <div class="recipe-body">
        <div class="section-label">Ingredients</div>
        <ul class="ingredients-grid">${ingList}</ul>
        <div class="section-label" style="margin-top:1rem">Instructions</div>
        <ol class="steps-list">${stepList}</ol>
        <div class="recipe-footer">
          <button class="btn-delete" onclick="deleteRecipe(event,'${r.id}')">üóë Remove Recipe</button>
        </div>
      </div>
    </div>`;
}

function toggleCat(id){ document.getElementById(`cat-${id}`).classList.toggle('open'); }
function toggleRecipe(id){ document.getElementById(`recipe-${id}`).classList.toggle('open'); }

function toast(msg){
  const el = document.getElementById('toast');
  el.textContent = msg;
  el.classList.add('show');
  setTimeout(()=>el.classList.remove('show'), 2800);
}

// Boot
loadRecipes();
</script>
</body>
</html>
